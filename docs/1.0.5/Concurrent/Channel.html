<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Concurrent::Channel
  
    &mdash; Concurrent
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Concurrent/Channel.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../root/Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span>
     &raquo; 
    <span class="title">Channel</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Concurrent::Channel
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Concurrent::Channel</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
      <dt class="r2">Extended by:</dt>
      <dd class="r2">Forwardable</dd>
      
    
  
    
      <dt class="r1">Includes:</dt>
      <dd class="r1">Enumerable</dd>
      
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/concurrent/channel.rb<span class="defines">,<br />
  lib/concurrent/channel/tick.rb,<br /> lib/concurrent/channel/selector.rb,<br /> lib/concurrent/channel/buffer/base.rb,<br /> lib/concurrent/channel/buffer/timer.rb,<br /> lib/concurrent/channel/buffer/ticker.rb,<br /> lib/concurrent/channel/buffer/sliding.rb,<br /> lib/concurrent/channel/buffer/dropping.rb,<br /> lib/concurrent/channel/buffer/buffered.rb,<br /> lib/concurrent/channel/buffer/unbuffered.rb,<br /> lib/concurrent/channel/selector/put_clause.rb,<br /> lib/concurrent/channel/selector/take_clause.rb,<br /> lib/concurrent/channel/selector/error_clause.rb,<br /> lib/concurrent/channel/selector/after_clause.rb,<br /> lib/concurrent/channel/selector/default_clause.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p><h1>Channels and Goroutines</h1>

<p>Channels, popularized by the <a href="https://golang.org/doc/effective_go.html#channels">Go programming language</a>, are a modern variation of <a href="https://en.wikipedia.org/wiki/Communicating_sequential_processes">communicating sequential processes (CSP)</a>. CSP was first proposed by  C. A. R. Hoare in 1978. The Go philosophy on concurrency is:</p>

<blockquote>
<p>Do not communicate by sharing memory; instead, share memory by communicating.</p>
</blockquote>

<p>As <a href="https://en.wikipedia.org/wiki/Rob_Pike">Rob Pike</a> eloquently explains in his <a href="https://vimeo.com/49718712">Concurrency Is Not Parallelism</a> conference talk, concurrency is the &quot;composition of independently executing things.&quot; Combining these two ideas, channels are a queue-like mechanism that can be used to communicate between independently executing things.</p>

<p>The channel implementation in this library was highly influenced by Go, but also incorporates ideas from Clojure&#39;s <a href="https://clojure.github.io/core.async/">core.async</a> library. Runtime differences aside, this channel library is functionally equivalent to Go and even includes a few features Go does not.</p>

<h3>Example Programs</h3>

<p>Every code example in the channel chapters of both <a href="https://tour.golang.org/welcome/1">A Tour of Go</a> and <a href="https://gobyexample.com/">Go By Example</a> has been reproduced in Ruby. The code can be found in the <a href="https://github.com/ruby-concurrency/concurrent-ruby/tree/master/examples">examples</a> directory of the source repository. Many of those examples appear in the documentation below, but many do not. They are a valuable resource for learning how to use channels.</p>

<h3>Additional Resources</h3>

<ul>
<li>&quot;A Tour of Go&quot; <a href="https://tour.golang.org/concurrency/2">channels exercises</a></li>
<li>&quot;Go By Example&quot; <a href="https://gobyexample.com/channels">channels exercises</a></li>
<li>&quot;Effective Go&quot; <a href="https://golang.org/doc/effective_go.html#concurrency">concurrency chapters</a></li>
<li>&quot;Concurrency Is Not Parallelims&quot; <a href="https://vimeo.com/49718712">conference presentation</a> by Rob Pike, principal designer of Go</li>
<li>&quot;Clojure core.async Channels&quot; <a href="http://clojure.com/blog/2013/06/28/clojure-core-async-channels.html">blog post</a> by Rich Hickey, inventor of Clojure</li>
<li>Clojure core.async <a href="https://clojure.github.io/core.async/">API reference</a></li>
</ul>

<h2>Goroutines</h2>

<p>The Go programming languages uses &quot;goroutines&quot; as the core concurrency mechanism. A goroutine is little more than an independently executing function, multiplexed with all other goroutines onto a thread pool managed by the runtime. Ruby has a very different runtime so true goroutines are not possible. Instread, a <span class='object_link'><a href="#go-class_method" title="Concurrent::Channel.go (method)">Channel.go</a></span> method is provided for running a block asynchronously, multiplexed onto a special thread pool reserved just for <code>Channel</code> operations. This is similar to what Clojure does with the <code>go</code> function from the <a href="https://clojure.github.io/core.async/#clojure.core.async/go">core.async</a> library.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Main thread: </span><span class='embexpr_beg'>#{</span><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

<span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Goroutine thread: </span><span class='embexpr_beg'>#{</span><span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='comment'># Main thread: #&lt;Thread:0x007fcb4c8bc3f0&gt;
</span><span class='comment'># Goroutine thread: #&lt;Thread:0x007fcb4c21f4e8&gt;
</span></code></pre>

<p>Although it is possible to use <code>Channel.go</code> independent of channels or to use channels with other asynchronous processing tools (such as <code>Future</code> and <code>Actor</code>), mixing the tools is not advised. Most high-level asynchronous processing tools already have a queue-like mechanism built in. Adding channels to the mix may indicate a design flaw. Conversely, <code>Channel.go</code> provides no mechanism for coordination and communication. That&#39;s what channels are for. Additionally, strictly using <code>Channel.go</code> along with channels provides an opportunity for future optimizations, such as Clojure&#39;s inversion of control (IOC) threads.</p>

<h2>Channel Basics</h2>

<p>Channels are &quot;pipes&quot; through which values can be sent. They are thread safe and naturally concurrent. When shared between goroutines they provide a communication mechanism for coordinating asynchronous actions.</p>

<p>The core channel operations are <span class='object_link'><a href="#put-instance_method" title="Concurrent::Channel#put (method)">#put</a></span> and <span class='object_link'><a href="#take-instance_method" title="Concurrent::Channel#take (method)">#take</a></span> (aliased as <span class='object_link'><a href="#send-instance_method" title="Concurrent::Channel#send (method)">#send</a></span> and <span class='object_link'><a href="#receive-instance_method" title="Concurrent::Channel#receive (method)">#receive</a></span>, respectively). The former function inserts a value into a channel where the latter removes a value. By default these are blocking operations. A call to <code>put</code> will block until the channel is ready to receive the value. Similarly, a call to <code>take</code> will block until a value is available to be removed.</p>

<p>The following, simple example creates a channel, launches a goroutine from which a value is placed into the channel, then reads that value from the channel. When run this example will display &quot;ping&quot; in the console.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_messages'>messages</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

<span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_messages'>messages</span><span class='period'>.</span><span class='id identifier rubyid_put'>put</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ping</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='id identifier rubyid_messages'>messages</span><span class='period'>.</span><span class='id identifier rubyid_take'>take</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_msg'>msg</span>
</code></pre>

<p>By default, channels are <em>unbuffered</em>, meaning that they have a capacity of zero and only accept puts and takes when both a putting and a taking thread are available. If a <code>put</code> is started when there is no taker thread the call will block. As soon as another thread calls <code>take</code> the exchange will occur and both calls will return on their respective threads. Similarly, is a <code>take</code> is started when there is no putting thread the call will block until another thread calls <code>put</code>.</p>

<p>The following, slightly more complex example, concurrently sums two different halves of a list then combines the results. It uses an unbuffered channel to pass the results from the two goroutines back to the main thread. The main thread blocks on the two <code>take</code> calls until the worker goroutines are done. This example also uses the convenience aliases <span class='object_link'><a href="#%3C%3C-instance_method" title="Concurrent::Channel#&lt;&lt; (method)">#&lt;&lt;</a></span> and <span class='object_link'><a href="#%7E-instance_method" title="Concurrent::Channel#~ (method)">#~</a></span>. Since channels in Go are part of the language, channel operations are performed using special channel operators rather than functions. These operators help clearly indicate that channel operations are being performed. The operator overloads <code>&lt;&lt;</code> for <code>put</code> and <code>~</code> for <code>take</code> help reinforce this idea in Ruby.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sum'>sum</span> <span class='op'>=</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_reduce'>reduce</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='symbol'>:+</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_c'>c</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sum'>sum</span> <span class='comment'># `&lt;&lt;` is an alias for `put` or `send`
</span><span class='kw'>end</span>

<span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>7</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>9</span><span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_l'>l</span> <span class='op'>=</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>/</span> <span class='int'>2</span>
<span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

<span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='op'>-</span><span class='id identifier rubyid_l'>l</span><span class='comma'>,</span> <span class='id identifier rubyid_l'>l</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_sum'>sum</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_l'>l</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='op'>~</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='op'>~</span><span class='id identifier rubyid_c'>c</span> <span class='comment'># `~` is an alias for `take` or `receive`
</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='op'>+</span><span class='id identifier rubyid_y'>y</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>

<h2>Channel Buffering</h2>

<p>One common channel variation is a <em>buffered</em> channel. A buffered channel has a finite number of slots in the buffer which can be filled. Putting threads can put values into the channel even if there is no taking threads, up to the point where the buffer is filled. Once a buffer becomes full the normal blocking behavior resumes. A buffered channel is created by giving a <code>:capacity</code> option on channel creation:</p>

<p>The following example creates a buffered channel with two slots. It then makes two <code>put</code> calls, adding values to the channel. These calls do not block because the buffer has room. Were a third <code>put</code> call to be made before an <code>take</code> calls, the third <code>put</code> would block.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ch'>ch</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>capacity:</span> <span class='int'>2</span><span class='rparen'>)</span>
<span class='id identifier rubyid_ch'>ch</span> <span class='op'>&lt;&lt;</span> <span class='int'>1</span>
<span class='id identifier rubyid_ch'>ch</span> <span class='op'>&lt;&lt;</span> <span class='int'>2</span>

<span class='id identifier rubyid_puts'>puts</span> <span class='op'>~</span><span class='id identifier rubyid_ch'>ch</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='op'>~</span><span class='id identifier rubyid_ch'>ch</span>
</code></pre>

<h2>Channel Synchronization</h2>

<p>The main purpose of channels is to synchronize operations across goroutines. One common pattern for this is to created a <code>capacity: 1</code> buffered channel which is used to signal that work is complete. The following example calls a <code>worker</code> function on a goroutine and passes it a &quot;done&quot; channel. The main thread then calls <code>take</code> on the &quot;done&quot; channel and blocks until signaled.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_worker'>worker</span><span class='lparen'>(</span><span class='id identifier rubyid_done_channel'>done_channel</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>working...\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>done\n</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_done_channel'>done_channel</span> <span class='op'>&lt;&lt;</span> <span class='kw'>true</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_done'>done</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>capacity:</span> <span class='int'>1</span><span class='rparen'>)</span>
<span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span><span class='lbrace'>{</span> <span class='id identifier rubyid_worker'>worker</span><span class='lparen'>(</span><span class='id identifier rubyid_done'>done</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

<span class='op'>~</span><span class='id identifier rubyid_done'>done</span> <span class='comment'># block until signaled
</span></code></pre>

<h2>Multichannel Select</h2>

<p>Often it is necessary for a single thread to operate on more than one channel. The <span class='object_link'><a href="#select-class_method" title="Concurrent::Channel.select (method)">Channel.select</a></span> method facilitates multivariate channel operations. The <code>select</code> method takes a block and passes through a special &quot;selector&quot; object as the first block parameter. The selector can then be used to specify various channel operations. The <code>select</code> call will block until one of the operations occurs. If a block is provided for the triggered clause (required for some clauses, optional for others) the block will then be called. Finally, the <code>select</code> call will immediately exit, guaranteeing that only one of the select clauses will trigger.</p>

<p>The following example spawns two goroutines, each of which goes to sleep before putting a value onto a channel. The main thread loops twice over a <code>select</code> and, in each loop, takes a value off of whichever channel returns one first.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_c1'>c1</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_c2'>c2</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

<span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_c1'>c1</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>one</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_c1'>c1</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>two</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>

<span class='int'>2</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
  <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_take'>take</span><span class='lparen'>(</span><span class='id identifier rubyid_c1'>c1</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_msg'>msg</span><span class='op'>|</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>received </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_msg'>msg</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_take'>take</span><span class='lparen'>(</span><span class='id identifier rubyid_c2'>c2</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_msg'>msg</span><span class='op'>|</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>received </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_msg'>msg</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>The output from the above example is:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_received'>received</span> <span class='id identifier rubyid_one'>one</span>
<span class='id identifier rubyid_received'>received</span> <span class='id identifier rubyid_two'>two</span>
</code></pre>

<p>The next example calculates the first 10 fibonacci numbers, passing them to the main thread via a channel. The fibonacci function puts each calculated value onto a channel while simultaneously listening to a different channel for the signal to stop. This example uses the <code>case</code> method on the selector object. This is just a convenience method for <code>put</code> and <code>take</code>, allowing the Ruby code to look more like Go.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_fibonacci'>fibonacci</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='id identifier rubyid_quit'>quit</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
      <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_case'>case</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='symbol'>:&lt;&lt;</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='op'>+</span><span class='id identifier rubyid_y'>y</span><span class='semicolon'>;</span> <span class='id identifier rubyid_x'>x</span> <span class='rbrace'>}</span> <span class='comment'># alias for `s.put`
</span>      <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_case'>case</span><span class='lparen'>(</span><span class='id identifier rubyid_quit'>quit</span><span class='comma'>,</span> <span class='symbol'>:~</span><span class='rparen'>)</span> <span class='kw'>do</span>                    <span class='comment'># alias for `s.take`
</span>        <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>quit</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>return</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_quit'>quit</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

<span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span> <span class='kw'>do</span>
  <span class='int'>10</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_puts'>puts</span> <span class='op'>~</span><span class='id identifier rubyid_c'>c</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_quit'>quit</span> <span class='op'>&lt;&lt;</span> <span class='int'>0</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_fibonacci'>fibonacci</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='id identifier rubyid_quit'>quit</span><span class='rparen'>)</span>
</code></pre>

<h2>Closing and Iterating Over Channels</h2>

<p>Newly created channels are in an &quot;open&quot; state. Open channels can receive values via <code>put</code> operations. When a program is done with a channel it can be closed by calling the <code>#close</code> method. Once a channel is closed it will no longer allow values to be <code>put</code>. If the channel is buffered and values are in the buffer when the channel is closed, the remaining values can still be removed via <code>take</code> operations.</p>

<p>The <code>Channel</code> class implements an <span class='object_link'><a href="#each-instance_method" title="Concurrent::Channel#each (method)">#each</a></span> method which can be used to retrieve successive values from the channel. The <code>each</code> method is a blocking method. When the channel is open and there are no values in the buffer, <code>each</code> will block until a new item is <code>put</code>. The <code>each</code> method will not exit until the channel is closed.</p>

<p>The following example launches a goroutine which calculates several fibonacci values and puts them into a channel. The main thread uses the <code>each</code> method to retrieve all the values successively and display them in the console. Once the fibonacci goroutine is done it closes the channel which subsequently causes the <code>each</code> iteration to end, unblocking the main thread.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_fibonacci'>fibonacci</span><span class='lparen'>(</span><span class='id identifier rubyid_n'>n</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span>
  <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_n'>n</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_c'>c</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_x'>x</span>
    <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='op'>+</span><span class='id identifier rubyid_y'>y</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_chan'>chan</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>capacity:</span> <span class='int'>10</span><span class='rparen'>)</span>
<span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_fibonacci'>fibonacci</span><span class='lparen'>(</span><span class='id identifier rubyid_chan'>chan</span><span class='period'>.</span><span class='id identifier rubyid_capacity'>capacity</span><span class='comma'>,</span> <span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_chan'>chan</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_i'>i</span> <span class='rbrace'>}</span>
</code></pre>

<p><code>Channel</code> also includes Ruby&#39;s <a href="http://ruby-doc.org/core-2.2.3/Enumerable.html">Enumerable</a> mixin, allowing for a wide range of list comprehensions. Since the <code>Enumerable</code> methods iterate over the entire set of objects they can only complete once the channel is closed. Calling a method from <code>Enumerable</code> on an open channel will cause the method to block until the channel is closed.</p>

<h2>Timers and Tickers</h2>

<p>A <span class='object_link'><a href="#timer-class_method" title="Concurrent::Channel.timer (method)">Channel.timer</a></span> is a specialized channel which triggers at a predefined time, specified as a number of seconds in the future. It is similar in concept to a <span class='object_link'><a href="ScheduledTask.html" title="Concurrent::ScheduledTask (class)">ScheduledTask</a></span> but operates as a channel and can fully participate in all channel operations.</p>

<p>The following code example creates two timers with different delay values. The first timer is allowed to expire (trigger) by having the main thread perform a <code>take</code> on it. When the timer expires it puts a <span class='object_link'><a href="Channel/Tick.html" title="Concurrent::Channel::Tick (class)">Tick</a></span> object into its buffer and closes. The second timer is listened to on a goroutine but the it never expires: the main thread stops (closes) the timer before it expires. Note that the goroutine in this example blocks forever and never exits. Since the timer is closed it never puts the <code>Tick</code> into its buffer.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_timer1'>timer1</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_timer'>timer</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span>

<span class='op'>~</span><span class='id identifier rubyid_timer1'>timer1</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Timer 1 expired</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_timer2'>timer2</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_timer'>timer</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>
<span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span> <span class='kw'>do</span>
  <span class='op'>~</span><span class='id identifier rubyid_timer2'>timer2</span>
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Timer 2 expired\n</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_stop2'>stop2</span> <span class='op'>=</span> <span class='id identifier rubyid_timer2'>timer2</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span> <span class='comment'># alias for `close`
</span><span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Timer 2 stopped\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_stop2'>stop2</span>
</code></pre>

<p>A <span class='object_link'><a href="#ticker-class_method" title="Concurrent::Channel.ticker (method)">Channel.ticker</a></span> is a specialized channel which triggers over and over again at a predefined interval, specified as a number of seconds between ticks. It is similar in concept to a <span class='object_link'><a href="TimerTask.html" title="Concurrent::TimerTask (class)">TimerTask</a></span> but operates as a channel and can fully participate in all channel operations.</p>

<p>The following example creates a ticker which triggers every half-second. A goroutine iterates over the ticker using the <code>each</code> method, printing the tick at every interval. When the main thread stops (closes) the ticker the <code>each</code> call ends and the goroutine exits.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_ticker'>ticker</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_ticker'>ticker</span><span class='lparen'>(</span><span class='float'>0.5</span><span class='rparen'>)</span>
<span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_ticker'>ticker</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tick'>tick</span><span class='op'>|</span>
    <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Tick at </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tick'>tick</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='float'>1.6</span><span class='rparen'>)</span>
<span class='id identifier rubyid_ticker'>ticker</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span> <span class='comment'># alias for `close`
</span><span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ticker stopped\n</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<h2>Default Selection</h2>

<p>As with a Ruby <code>case</code> statement, a <code>Channel.select</code> statement will accept a <code>default</code> clause which will trigger if none of the other clauses trigger. Not surprisingly, the <code>default</code> clause must be the last clause in a <code>select</code> block.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_tick'>tick</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_tick'>tick</span><span class='lparen'>(</span><span class='float'>0.1</span><span class='rparen'>)</span>  <span class='comment'># alias for `ticker`
</span><span class='id identifier rubyid_boom'>boom</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_after'>after</span><span class='lparen'>(</span><span class='float'>0.5</span><span class='rparen'>)</span> <span class='comment'># alias for `timer`
</span>
<span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
  <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_take'>take</span><span class='lparen'>(</span><span class='id identifier rubyid_tick'>tick</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tick.\n</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_take'>take</span><span class='lparen'>(</span><span class='id identifier rubyid_boom'>boom</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BOOM!\n</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_exit'>exit</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_default'>default</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>    .\n</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='float'>0.05</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>The output of this code example is:</p>

<pre class="code ruby"><code class="ruby">.
.
tick.
.
.
tick.
.
.
tick.
.
.
tick.
.
.
tick.
BOOM!
</code></pre>
</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Channel/Buffer.html" title="Concurrent::Channel::Buffer (module)">Buffer</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Channel/Tick.html" title="Concurrent::Channel::Tick (class)">Tick</a></span>, <span class='object_link'><a href="Channel/ValidationError.html" title="Concurrent::Channel::ValidationError (class)">ValidationError</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="Error-constant" class="">Error =
          
        </dt>
        <dd><pre class="code"><span class='const'>Class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>StandardError</span><span class='rparen'>)</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#go-class_method" title="go (class method)">+ (undocumented) <strong>go</strong>(*args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#go_loop-class_method" title="go_loop (class method)">+ (undocumented) <strong>go_loop</strong>(*args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#go_loop_via-class_method" title="go_loop_via (class method)">+ (undocumented) <strong>go_loop_via</strong>(executor, *args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#go_via-class_method" title="go_via (class method)">+ (undocumented) <strong>go_via</strong>(executor, *args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select-class_method" title="select (class method)">+ (undocumented) <strong>select</strong>(*args) {|selector, args| ... }</a>
    

    
      (also: alt)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ticker-class_method" title="ticker (class method)">+ (undocumented) <strong>ticker</strong>(interval) </a>
    

    
      (also: tick)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#timer-class_method" title="timer (class method)">+ (undocumented) <strong>timer</strong>(seconds) </a>
    

    
      (also: after)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">- (undocumented) <strong>each</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Channel) <strong>initialize</strong>(opts = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Channel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next-instance_method" title="#next (instance method)">- (undocumented) <strong>next</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next%3F-instance_method" title="#next? (instance method)">- (Boolean) <strong>next?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#offer-instance_method" title="#offer (instance method)">- (undocumented) <strong>offer</strong>(item) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#offer%21-instance_method" title="#offer! (instance method)">- (undocumented) <strong>offer!</strong>(item) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#offer%3F-instance_method" title="#offer? (instance method)">- (Boolean) <strong>offer?</strong>(item) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#poll-instance_method" title="#poll (instance method)">- (undocumented) <strong>poll</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#poll%21-instance_method" title="#poll! (instance method)">- (undocumented) <strong>poll!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#poll%3F-instance_method" title="#poll? (instance method)">- (Boolean) <strong>poll?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put-instance_method" title="#put (instance method)">- (undocumented) <strong>put</strong>(item) </a>
    

    
      (also: #send, #&lt;&lt;)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put%21-instance_method" title="#put! (instance method)">- (undocumented) <strong>put!</strong>(item) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put%3F-instance_method" title="#put? (instance method)">- (Boolean) <strong>put?</strong>(item) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#take-instance_method" title="#take (instance method)">- (undocumented) <strong>take</strong> </a>
    

    
      (also: #receive, #~)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#take%21-instance_method" title="#take! (instance method)">- (undocumented) <strong>take!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#take%3F-instance_method" title="#take? (instance method)">- (Boolean) <strong>take?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Concurrent::Channel (class)">Channel</a></span></tt>) <strong>initialize</strong>(opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of Channel</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='comment'># undocumented -- for internal use only
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Buffer</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_capacity'>capacity</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:capacity</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:size</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:buffer</span><span class='rbracket'>]</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_capacity'>capacity</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>==</span> <span class='symbol'>:unbuffered</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unbuffered channels cannot have a capacity</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_capacity'>capacity</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>=</span> <span class='const'>BUFFER_TYPES</span><span class='lbracket'>[</span><span class='symbol'>:unbuffered</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_capacity'>capacity</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>==</span> <span class='symbol'>:buffered</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>=</span> <span class='const'>BUFFER_TYPES</span><span class='lbracket'>[</span><span class='symbol'>:unbuffered</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>==</span> <span class='symbol'>:unbuffered</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>=</span> <span class='const'>BUFFER_TYPES</span><span class='lbracket'>[</span><span class='symbol'>:unbuffered</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_capacity'>capacity</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_capacity'>capacity</span> <span class='op'>&lt;</span> <span class='int'>1</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>capacity must be at least 1 for this buffer type</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>||=</span> <span class='symbol'>:buffered</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>=</span> <span class='const'>BUFFER_TYPES</span><span class='lbracket'>[</span><span class='id identifier rubyid_buffer'>buffer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_capacity'>capacity</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_validator'>validator</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:validator</span><span class='comma'>,</span> <span class='const'>DEFAULT_VALIDATOR</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="go-class_method">
  
    + (<tt>undocumented</tt>) <strong>go</strong>(*args, &amp;block) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_go'>go</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_go_via'>go_via</span><span class='lparen'>(</span><span class='const'>GOROUTINES</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="go_loop-class_method">
  
    + (<tt>undocumented</tt>) <strong>go_loop</strong>(*args, &amp;block) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


232
233
234</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 232</span>

<span class='kw'>def</span> <span class='id identifier rubyid_go_loop'>go_loop</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_go_loop_via'>go_loop_via</span><span class='lparen'>(</span><span class='const'>GOROUTINES</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="go_loop_via-class_method">
  
    + (<tt>undocumented</tt>) <strong>go_loop_via</strong>(executor, *args, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


236
237
238
239
240
241
242
243</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 236</span>

<span class='kw'>def</span> <span class='id identifier rubyid_go_loop_via'>go_loop_via</span><span class='lparen'>(</span><span class='id identifier rubyid_executor'>executor</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no block given</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_executor'>executor</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_block'>block</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
      <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="go_via-class_method">
  
    + (<tt>undocumented</tt>) <strong>go_via</strong>(executor, *args, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 227</span>

<span class='kw'>def</span> <span class='id identifier rubyid_go_via'>go_via</span><span class='lparen'>(</span><span class='id identifier rubyid_executor'>executor</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no block given</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_executor'>executor</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="select-class_method">
  
    + (<tt>undocumented</tt>) <strong>select</strong>(*args) {|selector, args| ... }
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='alt-class_method'>alt</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>selector</tt>, <tt>args</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217
218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 215</span>

<span class='kw'>def</span> <span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no block given</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_selector'>selector</span> <span class='op'>=</span> <span class='const'>Selector</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_selector'>selector</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_selector'>selector</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ticker-class_method">
  
    + (<tt>undocumented</tt>) <strong>ticker</strong>(interval) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='tick-class_method'>tick</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 210</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ticker'>ticker</span><span class='lparen'>(</span><span class='id identifier rubyid_interval'>interval</span><span class='rparen'>)</span>
  <span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Buffer</span><span class='op'>::</span><span class='const'>Ticker</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_interval'>interval</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="timer-class_method">
  
    + (<tt>undocumented</tt>) <strong>timer</strong>(seconds) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='after-class_method'>after</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


205
206
207</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 205</span>

<span class='kw'>def</span> <span class='id identifier rubyid_timer'>timer</span><span class='lparen'>(</span><span class='id identifier rubyid_seconds'>seconds</span><span class='rparen'>)</span>
  <span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Buffer</span><span class='op'>::</span><span class='const'>Timer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_seconds'>seconds</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="each-instance_method">
  
    - (<tt>undocumented</tt>) <strong>each</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192
193
194
195
196
197
198
199
200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 192</span>

<span class='kw'>def</span> <span class='id identifier rubyid_each'>each</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no block given</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='id identifier rubyid_more'>more</span> <span class='op'>=</span> <span class='id identifier rubyid_do_next'>do_next</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span> <span class='op'>!=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>NULL</span>
      <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_more'>more</span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="next-instance_method">
  
    - (<tt>undocumented</tt>) <strong>next</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>
<span class='id identifier rubyid_jobs'>jobs</span> <span class='op'>=</span> <span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

<span class='const'>Channel</span><span class='period'>.</span><span class='id identifier rubyid_go'>go</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_j'>j</span><span class='comma'>,</span> <span class='id identifier rubyid_more'>more</span> <span class='op'>=</span> <span class='id identifier rubyid_jobs'>jobs</span><span class='period'>.</span><span class='id identifier rubyid_next'>next</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_more'>more</span>
      <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>received job </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_j'>j</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>received all jobs\n</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 158</span>

<span class='kw'>def</span> <span class='kw'>next</span>
  <span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='id identifier rubyid_more'>more</span> <span class='op'>=</span> <span class='id identifier rubyid_do_next'>do_next</span>
  <span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span> <span class='op'>==</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>NULL</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='id identifier rubyid_more'>more</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="next?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>next?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167
168
169
170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 164</span>

<span class='kw'>def</span> <span class='id identifier rubyid_next?'>next?</span>
  <span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='id identifier rubyid_more'>more</span> <span class='op'>=</span> <span class='id identifier rubyid_do_next'>do_next</span>
  <span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span> <span class='op'>==</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>NULL</span>
           <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_nothing'>nothing</span>
         <span class='kw'>else</span>
           <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_just'>just</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
         <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='id identifier rubyid_more'>more</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="offer-instance_method">
  
    - (<tt>undocumented</tt>) <strong>offer</strong>(item) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100
101</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_offer'>offer</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_validate'>validate</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_do_offer'>do_offer</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="offer!-instance_method">
  
    - (<tt>undocumented</tt>) <strong>offer!</strong>(item) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#Error-constant" title="Concurrent::Channel::Error (constant)">Error</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


103
104
105
106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 103</span>

<span class='kw'>def</span> <span class='id identifier rubyid_offer!'>offer!</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_validate'>validate</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ok'>ok</span> <span class='op'>=</span> <span class='id identifier rubyid_do_offer'>do_offer</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Error</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_ok'>ok</span>
  <span class='id identifier rubyid_ok'>ok</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="offer?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>offer?</strong>(item) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


110
111
112
113
114
115
116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 110</span>

<span class='kw'>def</span> <span class='id identifier rubyid_offer?'>offer?</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_validate'>validate</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_nothing'>nothing</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>invalid value</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_do_offer'>do_offer</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
    <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_just'>just</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_nothing'>nothing</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="poll-instance_method">
  
    - (<tt>undocumented</tt>) <strong>poll</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 174</span>

<span class='kw'>def</span> <span class='id identifier rubyid_poll'>poll</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='id identifier rubyid_do_poll'>do_poll</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>NULL</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_item'>item</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="poll!-instance_method">
  
    - (<tt>undocumented</tt>) <strong>poll!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#Error-constant" title="Concurrent::Channel::Error (constant)">Error</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 178</span>

<span class='kw'>def</span> <span class='id identifier rubyid_poll!'>poll!</span>
  <span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='id identifier rubyid_do_poll'>do_poll</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Error</span> <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span> <span class='op'>==</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>NULL</span>
  <span class='id identifier rubyid_item'>item</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="poll?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>poll?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186
187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 184</span>

<span class='kw'>def</span> <span class='id identifier rubyid_poll?'>poll?</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='id identifier rubyid_do_poll'>do_poll</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>NULL</span>
    <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_nothing'>nothing</span>
  <span class='kw'>else</span>
    <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_just'>just</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="put-instance_method">
  
    - (<tt>undocumented</tt>) <strong>put</strong>(item) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='send-instance_method'>send</span>, <span id='<<-instance_method'>&lt;&lt;</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 74</span>

<span class='kw'>def</span> <span class='id identifier rubyid_put'>put</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_validate'>validate</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_do_put'>do_put</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="put!-instance_method">
  
    - (<tt>undocumented</tt>) <strong>put!</strong>(item) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#Error-constant" title="Concurrent::Channel::Error (constant)">Error</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


81
82
83
84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 81</span>

<span class='kw'>def</span> <span class='id identifier rubyid_put!'>put!</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_validate'>validate</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ok'>ok</span> <span class='op'>=</span> <span class='id identifier rubyid_do_put'>do_put</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Error</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_ok'>ok</span>
  <span class='id identifier rubyid_ok'>ok</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="put?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>put?</strong>(item) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91
92
93
94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_put?'>put?</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_validate'>validate</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_nothing'>nothing</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>invalid value</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_do_put'>do_put</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
    <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_just'>just</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_nothing'>nothing</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="take-instance_method">
  
    - (<tt>undocumented</tt>) <strong>take</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='receive-instance_method'>receive</span>, <span id='~-instance_method'>~</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_take'>take</span>
  <span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='id identifier rubyid_do_take'>do_take</span>
  <span class='id identifier rubyid_item'>item</span> <span class='op'>==</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>NULL</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_item'>item</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="take!-instance_method">
  
    - (<tt>undocumented</tt>) <strong>take!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#Error-constant" title="Concurrent::Channel::Error (constant)">Error</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 127</span>

<span class='kw'>def</span> <span class='id identifier rubyid_take!'>take!</span>
  <span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='id identifier rubyid_do_take'>do_take</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Error</span> <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span> <span class='op'>==</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>NULL</span>
  <span class='id identifier rubyid_item'>item</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="take?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>take?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/channel.rb', line 133</span>

<span class='kw'>def</span> <span class='id identifier rubyid_take?'>take?</span>
  <span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='id identifier rubyid_do_take'>do_take</span>
  <span class='id identifier rubyid_item'>item</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_item'>item</span> <span class='op'>==</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>NULL</span>
           <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_nothing'>nothing</span>
         <span class='kw'>else</span>
           <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Maybe</span><span class='period'>.</span><span class='id identifier rubyid_just'>just</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
         <span class='kw'>end</span>
  <span class='id identifier rubyid_item'>item</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Wed Aug 15 13:38:42 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.4.3).
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57940973-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>